# ğŸ›’ Proyecto PrÃ¡ctico: **â€œConstruyendo los cimientos de tu tienda onlineâ€**

## ğŸ¯ Contexto del Proyecto

ğŸ‘©â€ğŸ’¼ *Una pequeÃ±a empresa local llamada **TechMarket** desea lanzar su propia tienda online para vender productos electrÃ³nicos. Te han contratado para construir la base de datos inicial con Laravel, donde se gestionarÃ¡n los productos, las categorÃ­as, los clientes y los pedidos.*

Este serÃ¡ el primer paso para desarrollar una aplicaciÃ³n **real** de comercio electrÃ³nico con Laravel.

## ğŸ“ PropÃ³sito de Aprendizaje

Al desarrollar este proyecto:

- ğŸŒ ComprenderÃ¡s cÃ³mo estructurar una base de datos relacional para una tienda online.
- ğŸ”„ AprenderÃ¡s a crear migraciones y relaciones entre mÃºltiples entidades.
- ğŸ§± UsarÃ¡s Laravel Eloquent para definir modelos que representen objetos reales como clientes, productos y pedidos.
- ğŸŒ± InsertarÃ¡s datos ficticios (seeds) para probar el comportamiento del sistema.

## ğŸ§° Requisitos del entorno

- Laravel 12 âš™ï¸
- XAMPP (Apache + MySQL) ğŸ¬
- Visual Studio Code ğŸ’»
- Navegador Web ğŸŒ

## ğŸš§ Entidades que vamos a construir

1. ğŸ“¦ Productos
2. ğŸ—‚ï¸ CategorÃ­as
3. ğŸ§‘â€ğŸ’¼ Clientes
4. ğŸ§¾ Pedidos
5. ğŸ“œ Detalles del Pedido (los productos comprados por pedido)

# ğŸš¶ Paso a Paso: **ConstrucciÃ³n de la Base de Datos**

## ğŸ”§ Paso 1: Crear el proyecto Laravel

```bash
cd C:\xampp\htdocs
composer create-project --prefer-dist laravel/laravel techstore
cd techstore
```

## ğŸ› ï¸ Paso 2: Configura la base de datos en `.env`

En XAMPP crea una base de datos llamada `techstore_db`.

Edita `.env`:

```bash
DB_CONNECTION=mysql
DB_HOST=127.0.0.1
DB_PORT=3306
DB_DATABASE=techstore_db
DB_USERNAME=root
DB_PASSWORD=
```

Ejecuta una migraciÃ³n para confirmar que todo funciona:

```bash
php artisan migrate
```

## ğŸ“ Paso 3: Crear Migraciones

Creamos las migraciones de todas las tablas:

```bash
php artisan make:migration create_categories_table
php artisan make:migration create_products_table
php artisan make:migration create_customers_table
php artisan make:migration create_orders_table
php artisan make:migration create_order_items_table
```

### ğŸ—‚ï¸ `categories` (CategorÃ­as de productos)

```bash
Schema::create('categories', function (Blueprint $table) {
    $table->id();
    $table->string('name');
    $table->timestamps();
});
```

### ğŸ“¦ `products` (Productos)

```bash
Schema::create('products', function (Blueprint $table) {
    $table->id();
    $table->foreignId('category_id')->constrained()->onDelete('cascade');
    $table->string('name');
    $table->text('description');
    $table->decimal('price', 8, 2);
    $table->integer('stock');
    $table->timestamps();
});
```

### ğŸ§‘â€ğŸ’¼ `customers` (Clientes)

```bash
Schema::create('customers', function (Blueprint $table) {
    $table->id();
    $table->string('name');
    $table->string('email')->unique();
    $table->string('address');
    $table->timestamps();
});
```

### ğŸ§¾ `orders` (Pedidos)

```bash
Schema::create('orders', function (Blueprint $table) {
    $table->id();
    $table->foreignId('customer_id')->constrained()->onDelete('cascade');
    $table->timestamp('order_date')->useCurrent();
    $table->decimal('total', 10, 2);
    $table->timestamps();
});
```

### ğŸ“œ `order_items` (Productos en cada pedido)

```bash
Schema::create('order_items', function (Blueprint $table) {
    $table->id();
    $table->foreignId('order_id')->constrained()->onDelete('cascade');
    $table->foreignId('product_id')->constrained()->onDelete('cascade');
    $table->integer('quantity');
    $table->decimal('price', 8, 2);
    $table->timestamps();
});
```

ğŸš€ Aplica todas las migraciones:

```bash
php artisan migrate
```

## ğŸ§¬ Paso 4: Crear Modelos Eloquent

```bash
php artisan make:model Category
php artisan make:model Product
php artisan make:model Customer
php artisan make:model Order
php artisan make:model OrderItem
```

Ejemplo en `Product.php`:

```bash
public function category() {
    return $this->belongsTo(Category::class);
}
```

Ejemplo en `Order.php`:

```bash
public function customer() {
    return $this->belongsTo(Customer::class);
}

public function items() {
    return $this->hasMany(OrderItem::class);
}
```

Ejemplo en `OrderItem.php`:

```bash
public function order() {
    return $this->belongsTo(Order::class);
}

public function product() {
    return $this->belongsTo(Product::class);
}
```

## ğŸŒ± Paso 5: Insertar datos con Seeders

1. Crea seeders:

```bash
php artisan make:seeder CategorySeeder
php artisan make:seeder ProductSeeder
php artisan make:seeder CustomerSeeder
```

1. Agrega datos en los archivos:

`CategorySeeder.php`:

```bash
DB::table('categories')->insert([
    ['name' => 'Laptops'],
    ['name' => 'Smartphones'],
    ['name' => 'Accesorios'],
]);
```

`ProductSeeder.php`:

```bash
DB::table('products')->insert([
    ['category_id' => 1, 'name' => 'MacBook Air M2', 'description' => 'Laptop ultra ligera', 'price' => 1299.99, 'stock' => 15],
    ['category_id' => 2, 'name' => 'iPhone 15', 'description' => 'Smartphone de Ãºltima generaciÃ³n', 'price' => 999.00, 'stock' => 30],
]);
```

`CustomerSeeder.php`:

```bash
DB::table('customers')->insert([
    ['name' => 'Luis GÃ³mez', 'email' => 'luis@example.com', 'address' => 'Av. Central 123'],
]);
```

1. Registrar en `DatabaseSeeder.php`:

```bash
public function run()
{
    $this->call([
        CategorySeeder::class,
        ProductSeeder::class,
        CustomerSeeder::class,
    ]);
}
```

1. Ejecutar:

```bash
php artisan db:seed
```

## ğŸ” VerificaciÃ³n (Tinker)

Abre Tinker:

```bash
php artisan tinker
```

Consulta productos:

```bash
App\Models\Product::with('category')->get();
```

Consulta pedidos con sus items:

```bash
App\Models\Order::with('items')->first();
```

## ğŸ“ Conocimiento Final

Con este proyecto el estudiante:

âœ… Comprende cÃ³mo planificar y modelar una base de datos completa para una tienda real.

âœ… Domina relaciones `one-to-many` y `many-to-many` indirectas usando Laravel Eloquent.

âœ… Aprende buenas prÃ¡cticas de normalizaciÃ³n y estructura limpia.

âœ… Prepara una base sÃ³lida para implementar un carrito de compras o sistema de pagos.