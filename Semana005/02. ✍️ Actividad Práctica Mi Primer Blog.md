# âœï¸ Actividad PrÃ¡ctica: **â€œMi Primer Blog Profesional: Desde la Base de Datos hasta los Modelosâ€**

### ğŸ§© Escenario DidÃ¡ctico

ğŸ“Œ *La empresa ficticia â€œDigital Expressâ€, una agencia de marketing digital, quiere lanzar su propio blog para posicionar su marca y publicar contenidos sobre innovaciÃ³n, diseÃ±o y tecnologÃ­a. Han decidido contratarte como desarrollador backend para crear la estructura base del blog con Laravel.*

------

### ğŸ“ PropÃ³sito de la Actividad

- Comprender la creaciÃ³n de bases de datos utilizando **migraciones** en Laravel.
- Aplicar la estructura de datos mediante **modelos Eloquent** y la inserciÃ³n inicial con **seeds**.
- Preparar una base sÃ³lida para integrar mÃ¡s adelante funcionalidades como vistas, autenticaciÃ³n o comentarios.

### ğŸ› ï¸ Herramientas Requeridas

- âœ… **Laravel 12**
- âœ… **XAMPP (MySQL y Apache)**
- âœ… **Visual Studio Code**
- âœ… **Navegador Web**

### ğŸ”§ Paso 1: Crear el proyecto Laravel

Abre tu terminal (CMD o PowerShell) y ejecuta:

```bash
cd C:\xampp\htdocs
composer create-project --prefer-dist laravel/laravel blogapp
cd blogapp
```

> ğŸ“Œ *Si no tienes Laravel instalado, debes hacerlo previamente con Composer.*

### ğŸ—‚ï¸ Paso 2: Configurar la conexiÃ³n a base de datos

1. Abre **XAMPP** y activa **Apache** y **MySQL**.
2. En **phpMyAdmin**, crea una base de datos llamada `blogdb`.
3. Abre el archivo `.env` del proyecto y actualiza:

```bash
DB_CONNECTION=mysql
DB_HOST=127.0.0.1
DB_PORT=3306
DB_DATABASE=blogdb
DB_USERNAME=root
DB_PASSWORD=
```

ğŸ’¡ *Este archivo gestiona las variables de entorno como la conexiÃ³n de base de datos.*

### ğŸ“ Paso 3: Crear las migraciones

Ejecuta:

```bash
php artisan make:migration create_categories_table
php artisan make:migration create_posts_table
```

Edita `create_categories_table.php`:

```bash
public function up()
{
    Schema::create('categories', function (Blueprint $table) {
        $table->id();
        $table->string('name');
        $table->timestamps();
    });
}
```

Edita `create_posts_table.php`:

```bash
public function up()
{
    Schema::create('posts', function (Blueprint $table) {
        $table->id();
        $table->foreignId('category_id')->constrained()->onDelete('cascade');
        $table->string('title');
        $table->text('content');
        $table->timestamps();
    });
}
```

Aplica las migraciones:

```bash
php artisan migrate
```

âœ… *Ya tienes la estructura bÃ¡sica del blog: categorÃ­as y publicaciones.*

### ğŸ§¬ Paso 4: Crear los modelos Eloquent

```bash
php artisan make:model Category
php artisan make:model Post
```

Edita `Category.php`:

```bash
use Illuminate\Database\Eloquent\Factories\HasFactory;
class Category extends Model
{
    use HasFactory;
    
    // Campos que pueden ser asignados en masa (desde formularios)
    protected $fillable = ['name'];

    // RelaciÃ³n: Una categorÃ­a tiene muchos posts    

    public function posts()
    {
        return $this->hasMany(Post::class);
    }
}
```

Edita `Post.php`:

```bash
use Illuminate\Database\Eloquent\Factories\HasFactory;
class Post extends Model
{
    use HasFactory;
    
    protected $fillable = ['title', 'content', 'category_id'];

    public function category()
    {
        return $this->belongsTo(Category::class);
    }
}
```

ğŸ”„ *Estas relaciones permitirÃ¡n que un post sepa a quÃ© categorÃ­a pertenece, y que cada categorÃ­a tenga varios posts.*

### ğŸŒ± Paso 5: Crear Seeds para datos de ejemplo

```bash
php artisan make:seeder CategorySeeder
php artisan make:seeder PostSeeder
```

Edita `CategorySeeder.php`:

```php
public function run()
{
    DB::table('categories')->insert([
        ['name' => 'TecnologÃ­a'],
        ['name' => 'Negocios'],
        ['name' => 'DiseÃ±o']
    ]);
}
```

Edita `PostSeeder.php`:

```php
public function run()
{
    DB::table('posts')->insert([
        'category_id' => 1,
        'title' => 'Laravel 12: Lo nuevo en el framework lÃ­der',
        'content' => 'Laravel sigue evolucionando con nuevas funciones de rendimiento...'
    ]);
}
```

Registra los seeders en `DatabaseSeeder.php`:

```php
public function run()
{
    $this->call([
        CategorySeeder::class,
        PostSeeder::class,
    ]);
}
```

Ejecuta los seeders:

```bash
php artisan db:seed
```

### âœï¸ Crea un controlador llamado `PostController`

```
php artisan make:controller PostController --resource
```

Esto crearÃ¡ un controlador con todos los mÃ©todos REST (`index`, `create`, `store`, etc.).

## ğŸ“„ Archivo: `app/Http/Controllers/PostController.php`

```php+HTML
<?php

namespace App\Http\Controllers;

use App\Models\Post;
use App\Models\Category;
use Illuminate\Http\Request;

class PostController extends Controller
{
    // ğŸ—‚ï¸ Listar todos los posts
    public function index()
    {
        $posts = Post::with('category')->latest()->get();
        return view('posts.index', compact('posts'));
    }

    // â• Mostrar formulario para crear un nuevo post
    public function create()
    {
        $categories = Category::all();
        return view('posts.create', compact('categories'));
    }

    // ğŸ’¾ Almacenar un nuevo post en la base de datos
    public function store(Request $request)
    {
        $request->validate([
            'title' => 'required|max:255',
            'content' => 'required',
            'category_id' => 'required|exists:categories,id',
        ]);

        Post::create($request->all());

        return redirect()->route('posts.index')->with('success', 'âœ… Post creado exitosamente');
    }

    // ğŸ” Mostrar un solo post
    public function show(Post $post)
    {
        return view('posts.show', compact('post'));
    }

    // âœï¸ Mostrar formulario de ediciÃ³n
    public function edit(Post $post)
    {
        $categories = Category::all();
        return view('posts.edit', compact('post', 'categories'));
    }

    // ğŸ’¾ Actualizar post en la base de datos
    public function update(Request $request, Post $post)
    {
        $request->validate([
            'title' => 'required|max:255',
            'content' => 'required',
            'category_id' => 'required|exists:categories,id',
        ]);

        $post->update($request->all());

        return redirect()->route('posts.index')->with('success', 'âœï¸ Post actualizado correctamente');
    }

    // ğŸ—‘ï¸ Eliminar post
    public function destroy(Post $post)
    {
        $post->delete();
        return redirect()->route('posts.index')->with('success', 'ğŸ—‘ï¸ Post eliminado correctamente');
    }
}
```

## ğŸ§  Â¿QuÃ© hace cada mÃ©todo?

| MÃ©todo      | AcciÃ³n                                   | Ruta HTTP              |
| ----------- | ---------------------------------------- | ---------------------- |
| `index()`   | Muestra todos los posts                  | `GET /posts`           |
| `create()`  | Muestra formulario de creaciÃ³n           | `GET /posts/create`    |
| `store()`   | Guarda un nuevo post en la base de datos | `POST /posts`          |
| `show()`    | Muestra un post especÃ­fico               | `GET /posts/{id}`      |
| `edit()`    | Muestra formulario para editar un post   | `GET /posts/{id}/edit` |
| `update()`  | Actualiza un post existente              | `PUT /posts/{id}`      |
| `destroy()` | Elimina un post                          | `DELETE /posts/{id}`   |

## âœ… Crea un controlador llamado `CategoryController`

Desde tu terminal, ejecuta:

```bash
php artisan make:controller CategoryController --resource
```

ğŸ¯ Esto genera un archivo con 7 mÃ©todos base (index, create, store, show, edit, update, destroy) en:

```bash
app/Http/Controllers/CategoryController.php
```

## âœï¸ 2. CÃ³digo completo para `CategoryController`

```php+HTML
<?php

namespace App\Http\Controllers;

use App\Models\Category;
use Illuminate\Http\Request;

class CategoryController extends Controller
{
    // ğŸ—‚ï¸ Mostrar todas las categorÃ­as
    public function index()
    {
        $categories = Category::all();
        return view('categories.index', compact('categories'));
    }

    // â• Mostrar formulario para crear nueva categorÃ­a
    public function create()
    {
        return view('categories.create');
    }

    // ğŸ’¾ Almacenar categorÃ­a
    public function store(Request $request)
    {
        $request->validate([
            'name' => 'required|unique:categories|max:255',
        ]);

        Category::create($request->all());

        return redirect()->route('categories.index')->with('success', 'âœ… CategorÃ­a creada exitosamente');
    }

    // âœï¸ Mostrar formulario de ediciÃ³n
    public function edit(Category $category)
    {
        return view('categories.edit', compact('category'));
    }

    // ğŸ’¾ Actualizar categorÃ­a
    public function update(Request $request, Category $category)
    {
        $request->validate([
            'name' => 'required|max:255|unique:categories,name,' . $category->id,
        ]);

        $category->update($request->all());

        return redirect()->route('categories.index')->with('success', 'âœï¸ CategorÃ­a actualizada correctamente');
    }

    // ğŸ—‘ï¸ Eliminar categorÃ­a
    public function destroy(Category $category)
    {
        $category->delete();
        return redirect()->route('categories.index')->with('success', 'ğŸ—‘ï¸ CategorÃ­a eliminada');
    }
}
```

### âœï¸ Verifica `web.php`

En `routes/web.php`, asegÃºrate de tener esto al comienzo:

```bash
use App\Http\Controllers\PostController;
use App\Http\Controllers\CategoryController;
```

Y la ruta asÃ­:

```bash
Route::resource('posts', PostController::class);
Route::resource('categories', CategoryController::class);
```

## ğŸ¨ 2. IntegraciÃ³n de Bootstrap

Para una interfaz moderna, usaremos **Bootstrap 5** vÃ­a CDN. En tu plantilla base:

```php+HTML
<!-- resources/views/layouts/app.blade.php -->
<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>BlogApp</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
  
  @include('partials.nav')   {{-- MenÃº de navegaciÃ³n --}}

  <div class="container mt-4">
    @yield('content')        {{-- Contenido de cada vista --}}
  </div>

  <!-- Bootstrap JS y dependencias -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
```



## ğŸ“‘ 3. MenÃº de NavegaciÃ³n ğŸ”—

Creamos la vista parcial **`partials/nav.blade.php`**:

```php+HTML
<!-- resources/views/partials/nav.blade.php -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <div class="container-fluid">
    <a class="navbar-brand" href="{{ route('posts.index') }}">ğŸš€ BlogApp</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
            data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false"
            aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item">
          <a class="nav-link" href="{{ route('posts.index') }}">ğŸ“ Posts</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="{{ route('posts.create') }}">â• Nuevo Post</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="{{ route('categories.index') }}">ğŸ“‚ CategorÃ­as</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="{{ route('categories.create') }}">â• Nueva CategorÃ­a</a>
        </li>
      </ul>
    </div>
  </div>
</nav>
```

## ğŸ”€ 4. DefiniciÃ³n de Rutas

En **`routes/web.php`**, aÃ±ade:

```php+HTML
use App\Http\Controllers\PostController;
use App\Http\Controllers\CategoryController;

Route::resource('posts', PostController::class);
Route::resource('categories', CategoryController::class);
```

Esto genera automÃ¡ticamente las 7 rutas RESTful para **posts** y **categories**.

## ğŸ–¥ï¸ 5. Vistas para **Posts**

### 5.1 Lista de Posts (Index) ğŸ—‚ï¸

```php+HTML
<!-- resources/views/posts/index.blade.php -->
@extends('layouts.app')

@section('content')
  <h1>ğŸ“ Listado de Posts</h1>
  @if(session('success'))
    <div class="alert alert-success">{{ session('success') }}</div>
  @endif

  <table class="table table-striped">
    <thead>
      <tr>
        <th>TÃ­tulo</th>
        <th>CategorÃ­a</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      @foreach($posts as $post)
      <tr>
        <td>{{ $post->title }}</td>
        <td>{{ $post->category->name }}</td>
        <td>
          <a href="{{ route('posts.show', $post) }}" class="btn btn-primary btn-sm">ğŸ” Ver</a>
          <a href="{{ route('posts.edit', $post) }}" class="btn btn-warning btn-sm">âœï¸ Editar</a>
          <form action="{{ route('posts.destroy', $post) }}" method="POST" class="d-inline">
            @csrf @method('DELETE')
            <button class="btn btn-danger btn-sm" onclick="return confirm('Â¿Eliminar?')">ğŸ—‘ï¸ Borrar</button>
          </form>
        </td>
      </tr>
      @endforeach
    </tbody>
  </table>
@endsection
```

### 5.2 Ver un Post (Show) ğŸ”

```php+HTML
<!-- resources/views/posts/show.blade.php -->
@extends('layouts.app')

@section('content')
  <h1>{{ $post->title }}</h1>
  <p class="text-muted">CategorÃ­a: {{ $post->category->name }} | Creado: {{ $post->created_at->format('d/m/Y') }}</p>
  <div>{!! nl2br(e($post->content)) !!}</div>
  <a href="{{ route('posts.index') }}" class="btn btn-secondary mt-3">â¬…ï¸ Volver</a>
@endsection
```

### 5.3 Formulario de CreaciÃ³n (Create) â•

```php+HTML
<!-- resources/views/posts/create.blade.php -->
@extends('layouts.app')

@section('content')
  <h1>â• Crear Nuevo Post</h1>

  @if($errors->any())
    <div class="alert alert-danger">
      <ul>@foreach($errors->all() as $error)<li>{{ $error }}</li>@endforeach</ul>
    </div>
  @endif

  <form action="{{ route('posts.store') }}" method="POST">
    @csrf
    <div class="mb-3">
      <label class="form-label">TÃ­tulo</label>
      <input type="text" name="title" class="form-control" value="{{ old('title') }}" required>
    </div>
    <div class="mb-3">
      <label class="form-label">CategorÃ­a</label>
      <select name="category_id" class="form-select" required>
        <option value="">-- Selecciona --</option>
        @foreach($categories as $cat)
          <option value="{{ $cat->id }}" {{ old('category_id')==$cat->id?'selected':'' }}>
            {{ $cat->name }}
          </option>
        @endforeach
      </select>
    </div>
    <div class="mb-3">
      <label class="form-label">Contenido</label>
      <textarea name="content" rows="5" class="form-control" required>{{ old('content') }}</textarea>
    </div>
    <button type="submit" class="btn btn-success">ğŸ’¾ Guardar</button>
    <a href="{{ route('posts.index') }}" class="btn btn-secondary">â¬…ï¸ Cancelar</a>
  </form>
@endsection
```

### 5.4 Formulario de EdiciÃ³n (Edit) âœï¸

```php+HTML
<!-- resources/views/posts/edit.blade.php -->
@extends('layouts.app')

@section('content')
  <h1>âœï¸ Editar Post</h1>

  @if($errors->any())
    <div class="alert alert-danger">
      <ul>@foreach($errors->all() as $error)<li>{{ $error }}</li>@endforeach</ul>
    </div>
  @endif

  <form action="{{ route('posts.update', $post) }}" method="POST">
    @csrf @method('PUT')
    <!-- Campos idÃ©nticos a create, pero con valores llenados -->
    <div class="mb-3">
      <label class="form-label">TÃ­tulo</label>
      <input type="text" name="title" class="form-control" value="{{ old('title', $post->title) }}" required>
    </div>
    <div class="mb-3">
      <label class="form-label">CategorÃ­a</label>
      <select name="category_id" class="form-select" required>
        @foreach($categories as $cat)
          <option value="{{ $cat->id }}" 
            {{ (old('category_id', $post->category_id)==$cat->id)?'selected':'' }}>
            {{ $cat->name }}
          </option>
        @endforeach
      </select>
    </div>
    <div class="mb-3">
      <label class="form-label">Contenido</label>
      <textarea name="content" rows="5" class="form-control" required>{{ old('content', $post->content) }}</textarea>
    </div>
    <button type="submit" class="btn btn-primary">ğŸ’¾ Actualizar</button>
    <a href="{{ route('posts.index') }}" class="btn btn-secondary">â¬…ï¸ Cancelar</a>
  </form>
@endsection
```

## ğŸ“‚ 6. Vistas para **Categories**

ReplicarÃ¡s la misma estructura de **index**, **create**, **edit**, **show** (opcional). Por ejemplo, **`resources/views/categories/index.blade.php`**:

```php+HTML
@extends('layouts.app')
@section('content')
  <h1>ğŸ“‚ CategorÃ­as</h1>
  <a href="{{ route('categories.create') }}" class="btn btn-success mb-3">â• Nueva CategorÃ­a</a>
  <ul class="list-group">
    @foreach($categories as $cat)
      <li class="list-group-item d-flex justify-content-between align-items-center">
        {{ $cat->name }}
        <div>
          <a href="{{ route('categories.edit', $cat) }}" class="btn btn-warning btn-sm">âœï¸</a>
          <form action="{{ route('categories.destroy', $cat) }}" method="POST" class="d-inline">
            @csrf @method('DELETE')
            <button class="btn btn-danger btn-sm">ğŸ—‘ï¸</button>
          </form>
        </div>
      </li>
    @endforeach
  </ul>
@endsection
```

Y los formularios **`create`** y **`edit`** muy similares a los de posts, solicitando sÃ³lo el **`name`** de la categorÃ­a.

### ğŸ“ Crea el archivo `create.blade.php`

Ahora crea el archivo:

```bash
resources/views/categories/create.blade.php
```

Y copia este contenido bÃ¡sico:

```php+HTML
@extends('layouts.app')

@section('content')
  <h1>â• Nueva CategorÃ­a</h1>

  @if ($errors->any())
    <div class="alert alert-danger">
      <ul>@foreach ($errors->all() as $error)<li>{{ $error }}</li>@endforeach</ul>
    </div>
  @endif

  <form action="{{ route('categories.store') }}" method="POST">
    @csrf
    <div class="mb-3">
      <label for="name" class="form-label">Nombre de la categorÃ­a</label>
      <input type="text" name="name" class="form-control" required>
    </div>
    <button type="submit" class="btn btn-success">ğŸ’¾ Guardar</button>
    <a href="{{ route('categories.index') }}" class="btn btn-secondary">â¬…ï¸ Cancelar</a>
  </form>
@endsection
```

1. ## ğŸš€ 1. Inicia la aplicaciÃ³n

   En tu terminal:

   ```bash
   php artisan serve
   ```

   Esto levantarÃ¡ tu servidor en:
    ğŸŒ http://127.0.0.1:8000

   ## ğŸ§­ 2. MenÃº de navegaciÃ³n (barra superior)

   En tu aplicaciÃ³n verÃ¡s un menÃº con enlaces como:

   ```css
   [ğŸš€ BlogApp] [ğŸ“ Posts] [â• Nuevo Post] [ğŸ“‚ CategorÃ­as] [â• Nueva CategorÃ­a]
   ```

   ## ğŸ“‘ 3. Secciones disponibles

   ### ğŸ”¹ A. Ver todos los Posts

   - Haz clic en **ğŸ“ Posts**
   - Te llevarÃ¡ a: `http://127.0.0.1:8000/posts`
   - VerÃ¡s una tabla con todos los posts creados: tÃ­tulo, categorÃ­a y botones de acciÃ³n

   ### ğŸ”¹ B. Crear un nuevo Post

   - Haz clic en **â• Nuevo Post**
   - Te lleva a: `http://127.0.0.1:8000/posts/create`
   - Rellena: tÃ­tulo, categorÃ­a y contenido
   - Al guardar, te redirige a la lista con un mensaje de Ã©xito

   ### ğŸ”¹ C. Ver detalles de un Post

   - En la lista de posts, haz clic en ğŸ” **Ver**
   - Te lleva a: `http://127.0.0.1:8000/posts/{id}`
   - Muestra tÃ­tulo, contenido y datos de categorÃ­a y fecha

   ### ğŸ”¹ D. Editar un Post

   - En la lista de posts, haz clic en âœï¸ **Editar**
   - Te lleva a: `http://127.0.0.1:8000/posts/{id}/edit`
   - Modifica campos y guarda

   ### ğŸ”¹ E. Eliminar un Post

   - Haz clic en ğŸ—‘ï¸ **Borrar** desde la lista
   - Confirmas el mensaje emergente, y se elimina

   ## ğŸ“‚ 4. NavegaciÃ³n por CategorÃ­as

   ### ğŸ”¹ A. Ver categorÃ­as

   - Haz clic en **ğŸ“‚ CategorÃ­as**
   - Te lleva a: `http://127.0.0.1:8000/categories`
   - VerÃ¡s una lista con botones âœï¸ y ğŸ—‘ï¸

   ### ğŸ”¹ B. Crear nueva categorÃ­a

   - Haz clic en **â• Nueva CategorÃ­a**
   - Te lleva a: `http://127.0.0.1:8000/categories/create`
   - AÃ±ade un nombre y guarda

   ### ğŸ”¹ C. Editar o eliminar categorÃ­a

   - Desde la lista, haz clic en âœï¸ para editar o ğŸ—‘ï¸ para eliminar

   ## ğŸ’¡ Tips Ãºtiles

   - ğŸ“‹ Usa el menÃº superior en todo momento para moverte entre secciones
   - âœ… Todos los formularios validan automÃ¡ticamente los datos
   - ğŸ“¦ La base de datos debe tener categorÃ­as antes de crear posts

   ## ğŸ§  Â¿QuÃ© aprendiste navegando?

   - A usar rutas RESTful de Laravel (`index`, `create`, `store`, etc.)
   - A comprender la interacciÃ³n entre modelos, controladores y vistas
   - A aprovechar Blade y Bootstrap para crear una UX sencilla y clara

## ğŸ“ Conocimientos Adquiridos

Al completar estas interfaces y su interacciÃ³n, habrÃ¡s aprendido:

- ğŸ’¼ DiseÃ±ar y montar una **UI profesional** con **Bootstrap**.
- ğŸ”— Conectar **vistas**, **rutas** y **controladores** en un flujo fluido.
- ğŸ› ï¸ Usar los **helper Blade** (`@csrf`, `@method`, `@yield`, `@section`).
- ğŸŒ± Desplegar una app Laravel lista para agregar autenticaciÃ³n, comentarios u otras funcionalidades.
- ğŸ’¼ Comprende la estructura bÃ¡sica de una base de datos relacional en Laravel.
- ğŸ”— Es capaz de crear migraciones y relaciones entre modelos.
- ğŸŒ± Sabe insertar datos iniciales con seeds y validar los modelos con Tinker.
- ğŸ“¦ Visualiza cÃ³mo estos elementos interactÃºan como el backend real de una aplicaciÃ³n profesional.

## ğŸ§¾ ConclusiÃ³n

Esta prÃ¡ctica te permitiÃ³ conocer la estructura interna de un blog desde el backend. Laravel simplifica mucho la interacciÃ³n con la base de datos, y ahora ya dominas cÃ³mo representar entidades reales como publicaciones y categorÃ­as. EstÃ¡s un paso mÃ¡s cerca de construir tu aplicaciÃ³n funcional con panel de administraciÃ³n y vistas.